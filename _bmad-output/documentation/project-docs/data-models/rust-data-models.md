# Rust Data Models

**Location:** `src-tauri/src/db/models/project.rs`

## `Project` Struct

**Purpose:** Represents a complete project row from database

```rust
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Project {
    pub id: i64,
    pub title: String,
    pub author_name: Option<String>,
    pub pen_name: Option<String>,
    pub tagline: Option<String>,
    pub genre: Option<String>,
    pub subgenre: Option<String>,
    pub target_audience: Option<String>,
    pub tone: Option<String>,
    pub point_of_view: Option<String>,
    pub story_framework: Option<String>,
    pub chapter_count: Option<i32>,
    pub target_words_per_chapter: Option<i32>,
    pub plot_premise: Option<String>,
    pub language: String,
    pub created_at: String,              // ISO 8601 format
    pub updated_at: String,              // ISO 8601 format
    pub file_path: String,
    pub last_opened_at: Option<String>,  // ISO 8601 format
}
```

### Methods

```rust
impl Project {
    // Validate project data
    pub fn validate(&self) -> Result<(), String>

    // Calculate target word count (chapter_count * target_words_per_chapter)
    pub fn get_target_word_count(&self) -> i32
}
```

### Validation Rules

**`validate()` Method:**
- `title` must not be empty
- `file_path` must not be empty
- `tagline` length <= 150 characters (if present)
- `plot_premise` length <= 2000 characters (if present)

**Example:**
```rust
let project = Project { /* ... */ };
project.validate()?; // Returns Err if invalid
```

### Default Behavior

**`get_target_word_count()`:**
- If `chapter_count` and `target_words_per_chapter` are both set: returns their product
- If either is missing: returns default (20 chapters Ã— 3000 words = 60,000 words)

---

## `NewProject` Struct

**Purpose:** Create a new project (omits auto-generated fields)

```rust
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NewProject {
    pub title: String,
    pub author_name: Option<String>,
    pub pen_name: Option<String>,
    pub tagline: Option<String>,
    pub genre: Option<String>,
    pub subgenre: Option<String>,
    pub target_audience: Option<String>,
    pub tone: Option<String>,
    pub point_of_view: Option<String>,
    pub story_framework: Option<String>,
    pub chapter_count: Option<i32>,
    pub target_words_per_chapter: Option<i32>,
    pub plot_premise: Option<String>,
    pub language: String,                // Default: "en"
    pub file_path: String,
    pub last_opened_at: Option<String>,
}
```

**Omitted Fields:**
- `id` - Auto-generated by database (AUTOINCREMENT)
- `created_at` - Auto-set by database (CURRENT_TIMESTAMP)
- `updated_at` - Auto-set by database (CURRENT_TIMESTAMP)

### Validation

Uses the same `validate()` method as `Project` (shares validation logic).

---
